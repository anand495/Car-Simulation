# Parking Simulation Test Report

**Generated:** 2025-12-28T20:21:10.194Z
**Version:** 3.4.0
**Duration:** 15.5 sec

## Summary

| Metric | Value |
|--------|-------|
| Total Passed | 38 |
| Total Failed | 6 |
| Pass Rate | 86.4% |

## Unit Tests - Pure Functions

**Passed:** 26 | **Failed:** 0

### Math Utilities

| Test | Status | Message |
|------|--------|---------|
| normalizeAngle: wraps 2π to 0 | ✅ Pass | normalized angle is within tolerance: 0 ≈ 0 (±0.001) |
| normalizeAngle: wraps -2π to 0 | ✅ Pass | normalized angle is within tolerance: 0 ≈ 0 (±0.001) |
| normalizeAngle: wraps 3π to π | ✅ Pass | normalized angle is within tolerance: 3.141592653589793 ≈ 3. |
| normalizeAngle: keeps π/2 unchanged | ✅ Pass | normalized angle is within tolerance: 1.5707963267948966 ≈ 1 |
| normalizeAngle: keeps -π/2 unchanged | ✅ Pass | normalized angle is within tolerance: -1.5707963267948966 ≈  |
| distance: calculates correctly for horizontal | ✅ Pass | distance is within tolerance: 10 ≈ 10 (±0.001) |
| distance: calculates correctly for vertical | ✅ Pass | distance is within tolerance: 10 ≈ 10 (±0.001) |
| distance: calculates correctly for diagonal (3-4-5) | ✅ Pass | distance is within tolerance: 5 ≈ 5 (±0.001) |
| distance: returns 0 for same point | ✅ Pass | distance is within tolerance: 0 ≈ 0 (±0.001) |

### Constants

| Test | Status | Message |
|------|--------|---------|
| CAR_LENGTH is realistic (4-5m) | ✅ Pass | CAR_LENGTH = 4.5m is realistic |
| CAR_WIDTH is realistic (1.5-2.5m) | ✅ Pass | CAR_WIDTH = 1.8m is realistic |
| SPEEDS.MAIN_ROAD is ~30mph (12-15 m/s) | ✅ Pass | MAIN_ROAD speed = 13.4 m/s is realistic |
| SPEEDS.AISLE is ~10mph (4-5 m/s) | ✅ Pass | AISLE speed = 4.5 m/s is realistic |
| PHYSICS.MAX_ACCELERATION is comfortable (2-3 m/s²) | ✅ Pass | MAX_ACCELERATION = 2.5 m/s² is comfortable |
| PHYSICS.MAX_DECELERATION is comfortable (3-5 m/s²) | ✅ Pass | MAX_DECELERATION = 4 m/s² is comfortable |
| PHYSICS.EMERGENCY_DECEL is emergency-level (7-10 m/s²) | ✅ Pass | EMERGENCY_DECEL = 8 m/s² is appropriate |

### Topology

| Test | Status | Message |
|------|--------|---------|
| createTestSim creates valid simulation | ✅ Pass | Simulation created successfully |
| Topology has correct number of spots | ✅ Pass | Created 150 spots (requested 150) |
| Topology has 3 lanes on main road | ✅ Pass | Main road has 3 lanes |
| Topology has valid entry road | ✅ Pass | Entry road at x=167.5, width=7 |
| Topology has valid exit road | ✅ Pass | Exit road at x=140, width=7 |
| Entry and exit roads are separated | ✅ Pass | Entry and exit roads separated by 27.5m |

### Paved Area

| Test | Status | Message |
|------|--------|---------|
| isWithinPavedArea: center of lot is paved | ✅ Pass | Lot center is within paved area |
| isWithinPavedArea: main road is paved | ✅ Pass | Main road center is within paved area |
| isWithinPavedArea: far off-map is not paved | ✅ Pass | Far off-map position correctly identified as unpaved |
| isWithinPavedArea: despawn extension (x < 0) is valid | ✅ Pass | Despawn extension zone is paved |

## Interaction Tests - Multi-Vehicle Behavior (High Occupancy)

**Passed:** 12 | **Failed:** 6

### Car Following

| Test | Status | Message |
|------|--------|---------|
| High traffic: vehicles maintain safe following distance | ❌ Fail | 1 gap violations detected |
| Dense traffic: following vehicle slows for leader | ✅ Pass | No collisions detected among 22 vehicles |
| Large convoy (40 vehicles) maintains gaps | ✅ Pass | Large convoy maintains safe gaps with no collisions |

### Lane Changing

| Test | Status | Message |
|------|--------|---------|
| Lane changes complete under heavy traffic (50 vehicles) | ✅ Pass | 23/42 vehicles entered/entering (55%) |
| Lane change safety under congestion (60 vehicles) | ✅ Pass | No collisions detected among 26 vehicles |

### Speed Compliance

| Test | Status | Message |
|------|--------|---------|
| Speed limits respected under high load (70 vehicles) | ✅ Pass | All vehicles comply with speed limits |
| In-lot speed compliance (40 vehicles in lot) | ❌ Fail | Only 0 vehicles in lot (expected >=5 for valid test) |

### Stuck Detection

| Test | Status | Message |
|------|--------|---------|
| No stuck vehicles at 80% occupancy (80/100 spots) | ✅ Pass | No vehicles stuck longer than 45s |
| Stuck resolution at 90% occupancy (90/100 spots) | ✅ Pass | Final max wait time: 0.0s at 90% occupancy |

### Boundary Integrity

| Test | Status | Message |
|------|--------|---------|
| Boundary integrity at 75% occupancy | ✅ Pass | All 48 vehicles are within paved area |

### Merging

| Test | Status | Message |
|------|--------|---------|
| Mass exodus: 50 vehicles merge safely | ✅ Pass | No collisions detected among 17 vehicles |
| Merge yield under heavy traffic (60 veh/min) | ❌ Fail | Exited: 7/40, Merge queue: 0 waiting, 2 merging |

### Stress Test

| Test | Status | Message |
|------|--------|---------|
| Extreme stress: 100 vehicles in 120 spots | ✅ Pass | No collisions detected among 54 vehicles |
| Extreme stress: stuck rate at 90% occupancy | ✅ Pass | Stuck rate: 0.0% (0/47) at 90% occupancy |
| Full capacity: 100/100 spots collision-free | ✅ Pass | No collisions at 100% occupancy (38 parked) |

### Physics Compliance

| Test | Status | Message |
|------|--------|---------|
| Acceleration limits at 60% occupancy | ❌ Fail | Acceleration exceeded: accel=2.50, decel=12.00 |

### Full Cycle

| Test | Status | Message |
|------|--------|---------|
| Full cycle: 50 vehicles park and exit (50% occupancy) | ❌ Fail | Parked: 18/50, Exited: 18 (100% success) |
| Full cycle: 80 vehicles (80% occupancy) | ❌ Fail | Parked: 33/80, Exited: 20 (61% success) |

## Failed Tests Details

### ❌ High traffic: vehicles maintain safe following distance

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Car Following
**Message:** 1 gap violations detected

**Details:**
```json
{
  "minGapRequired": 2,
  "violations": [
    {
      "follower": 38,
      "leader": 37,
      "gap": 1.0605825093724093
    }
  ]
}
```

### ❌ In-lot speed compliance (40 vehicles in lot)

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Speed Compliance
**Message:** Only 0 vehicles in lot (expected >=5 for valid test)

**Details:**
```json
{
  "inLotCount": 0
}
```

### ❌ Merge yield under heavy traffic (60 veh/min)

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Merging
**Message:** Exited: 7/40, Merge queue: 0 waiting, 2 merging

**Details:**
```json
{
  "waitingToMerge": 0,
  "currentlyMerging": 2,
  "exited": 7
}
```

### ❌ Acceleration limits at 60% occupancy

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Physics Compliance
**Message:** Acceleration exceeded: accel=2.50, decel=12.00

**Details:**
```json
{
  "maxAccel": 2.5000000000001465,
  "maxDecel": 11.999999999999858,
  "vehicleCount": 60
}
```

### ❌ Full cycle: 50 vehicles park and exit (50% occupancy)

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Full Cycle
**Message:** Parked: 18/50, Exited: 18 (100% success)

**Details:**
```json
{
  "parkedCount": 18,
  "exitedCount": 18,
  "successRate": 100
}
```

### ❌ Full cycle: 80 vehicles (80% occupancy)

**Suite:** Interaction Tests - Multi-Vehicle Behavior (High Occupancy)
**Category:** Full Cycle
**Message:** Parked: 33/80, Exited: 20 (61% success)

**Details:**
```json
{
  "parkedCount": 33,
  "exitedCount": 20,
  "successRate": 60.60606060606061,
  "occupancy": "80%"
}
```
